---
products:
    new:
        limit: {{theme_settings.homepage_new_products_count}}
    featured:
        limit: {{theme_settings.homepage_featured_products_count}}
    top_sellers:
        limit: {{theme_settings.homepage_top_products_count}}
carousel: {{theme_settings.homepage_show_carousel}}
blog:
    recent_posts:
        limit: {{theme_settings.homepage_blog_posts_count}}
---
{{#if theme_settings.homepage_stretch_carousel_images}}
  {{#partial "hero"}}
    {{#and carousel carousel.slides.length}}
        {{> components/carousel arrows=theme_settings.homepage_show_carousel_arrows play_pause_button=theme_settings.homepage_show_carousel_play_pause_button}}
      {{/and}}
  {{/partial}}
{{/if}}
{{#partial "page"}}
    {{#unless theme_settings.homepage_stretch_carousel_images}}
      {{#and carousel carousel.slides.length}}
        {{> components/carousel arrows=theme_settings.homepage_show_carousel_arrows play_pause_button=theme_settings.homepage_show_carousel_play_pause_button}}
      {{/and}}
    {{/unless}}
    <div class="page">
        {{{region name="home_below_carousel"}}}

        <aside class="page-sidebar">
            {{> components/epic/sidebar}}
        </aside>

        <main class="page-content">
            {{{region name="home_above_featured_products"}}}
            {{#each shipping_messages}}
                {{> components/common/alert/alert-info message}}
            {{/each}}

            {{#and products.featured (if theme_settings.homepage_featured_products_count '>' 0)}}
                {{> components/products/featured products=products.featured columns=theme_settings.homepage_featured_products_column_count}}
            {{/and}}
            {{{region name="home_below_featured_products"}}}

            {{#and products.new (if theme_settings.homepage_new_products_count '>' 0)}}
                {{> components/products/new products=products.new columns=theme_settings.homepage_new_products_column_count}}
            {{/and}}
            {{{region name="home_below_new_products"}}}

            {{#and products.top_sellers (if theme_settings.homepage_top_products_count '>' 0)}}
                {{> components/products/top products=products.top_sellers columns=theme_settings.homepage_top_products_column_count}}
            {{/and}}
            {{{region name="home_below_top_products"}}}
        </main>
        <div class="sidebar-region">
            {{{region name="epic_sidebar"}}}
            {{{region name="epic_sidebar--global"}}}
        </div>
    </div>
{{/partial}}
{{> layout/base}}
